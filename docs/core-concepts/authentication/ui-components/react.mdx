---
title: React
description: Framework-agnostic authentication components for any React application
---

The `@insforge/react` package provides **complete authentication solution for React applications**. Use deployed auth pages (built-in auth) or custom UI components—works with Vite + React Router.

<Tip>
**For AI Agents - Quick Navigation:**
- **Built-in auth (recommended)**: Follow [Quick Start](#quick-start) → 5-minute setup with deployed auth pages
- **Custom UI needed**: See [Alternative: Custom UI Components](#alternative-custom-ui-components)
- **Form components**: Jump to [Form Components](#form-components-pure-ui) for controlled UI
- **Hooks only**: See [Hooks](#hooks) for headless auth

**Key principle**: All components use `@insforge/sdk` methods internally. Framework-agnostic by design.

</Tip>

## Why @insforge/react?

<CardGroup cols={2}>
  <Card title="Built-in Auth Pages" icon="code">
    Deployed auth UI, easy to implement
  </Card>

  <Card title="5-Minute Setup" icon="clock">
    Provider + Router config = production-ready auth
  </Card>

  <Card title="Complete Package" icon="box">
    SDK integration, providers, hooks, and UI components
  </Card>

  <Card title="Full TypeScript" icon="shield-check">
    Complete type safety out of the box
  </Card>
</CardGroup>

<Note>
  **Built-in auth (recommended)**: Use deployed authentication pages for zero UI code. Switch to
  custom components only if you need highly customized branding or additional form fields.
</Note>

## Features

- **Built-in Auth**: React Router integration with deployed auth pages
- **Complete Components**: Pre-built `<SignIn>`, `<SignUp>`, `<UserButton>` with business logic
- **OAuth Support**: Google, GitHub, Discord, Facebook, LinkedIn, Microsoft, Apple, X, Instagram, TikTok, Spotify
- **React Hooks**: `useAuth()`, `useUser()`, `usePublicAuthConfig()`
- **Control Components**: `<SignedIn>`, `<SignedOut>`, `<Protect>`
- **Form Components**: Pure UI forms for custom logic
- **TypeScript**: Full type safety

## Installation

```bash
npm install @insforge/react
```

<Note>
  **Required Dependencies:** ```bash npm install react@^19.0.0 react-dom@^19.0.0
  react-router-dom@^7.9.0 ```
</Note>

## Quick Start

### Step 1: Setup Provider

Wrap your app with `InsforgeProvider` in the root:

```tsx src/main.tsx
import { StrictMode } from 'react';
import { createRoot } from 'react-dom/client';
import { InsforgeProvider } from '@insforge/react';
import App from './App';

createRoot(document.getElementById('root')!).render(
  <StrictMode>
    <InsforgeProvider
      baseUrl={https://your-project.insforge.app}
      afterSignInUrl="/dashboard"
    >
      <App />
    </InsforgeProvider>
  </StrictMode>
);
```

**Provider Props:**

- `baseUrl` (required): Your Insforge backend URL
- `afterSignInUrl` (required): Redirect URL after successful sign in (default: `'/'`)
- `onSignIn` (optional): Custom function to sync token on sign in
- `onSignOut` (optional): Custom function to clear auth state on sign out

### Step 2: Configure Router (Built-in Auth)

**The fastest way** - Use deployed auth pages with Layout pattern:

```tsx src/App.tsx
import { createBrowserRouter, RouterProvider } from 'react-router-dom';
import { getInsforgeRoutes } from '@insforge/react/router';
import Layout from './components/Layout';
import Home from './pages/Home';
import Dashboard from './pages/Dashboard';

const router = createBrowserRouter([
  {
    path: '/',
    element: <Layout />,
    children: [
      { index: true, element: <Home /> },

      { path: 'dashboard', element: <Dashboard /> }
    ]
  },

  // Add built-in auth redirect routes (sign-in, sign-up, forgot-password, etc.)
  ...getInsforgeRoutes({
    baseUrl: https://your-project.insforge.app,
    afterSignInUrl="/dashboard"
    builtInAuth: true  // Redirects to deployed auth pages
  })
]);

export default function App() {
  return <RouterProvider router={router} />;
}
```

```tsx src/components/Layout.tsx
import { Outlet } from 'react-router-dom';

export default function Layout() {
  return (
    <div>
      <nav>{/* Your navigation */}</nav>
      <main>
        <Outlet />
      </main>
    </div>
  );
}
```

**What this does:**

- Visiting `/sign-in` → Redirects to `your-project.insforge.app/auth/sign-in`
- Visiting `/sign-up` → Redirects to `your-project.insforge.app/auth/sign-up`
- Visiting `/forgot-password` → Redirects to `your-project.insforge.app/auth/forgot-password`
- After auth → Backend redirects with token in URL → SDK auto-detects and stores token → Goes to dashboard

<Info>
  **Built-in auth** means using authentication pages hosting in your InsForge App. No UI code
  needed!
</Info>

### Step 3: Use Hooks & Components

```tsx src/pages/Home.tsx
import { SignedIn, SignedOut, UserButton, useAuth, useUser } from '@insforge/react';

export default function Home() {
  const { isSignedIn } = useAuth();
  const { user } = useUser();

  return (
    <div>
      <SignedOut>
        <a href="/sign-in">Sign In</a>
      </SignedOut>

      <SignedIn>
        <UserButton afterSignOutUrl="/" />
        <h1>Welcome, {user?.email}!</h1>
      </SignedIn>
    </div>
  );
}
```

**That's it!**  Your React app now has production-ready authentication with built-in auth pages.

## How It Works

### Built-in Auth Flow

```
1. User clicks "Sign In" → Visits /sign-in route
   ↓
2. getInsforgeRoutes() redirects → your-project.insforge.app/auth/sign-in?redirect=yourapp.com/you-defined-destination-after-sign-in
   ↓
3. User signs in on deployed page → Backend processes authentication
   ↓
4. Backend redirects → yourapp.com/you-defined-destination-after-sign-in?access_token=xxx&user_id=xxx
   ↓
5. InsForge SDK will:
   - Extracts token from URL
   - Saves to localStorage
   - Verifies with getCurrentUser()
   - Updates Provider state
   ↓
6. User sees the destination page (e.g /dashboard)
```

### Custom UI Flow

```
1. User visits /sign-in route → Renders <SignIn> component
   ↓
2. User enters credentials → Component calls SDK methods
   ↓
3. SDK communicates with backend → Returns auth token and user data
   ↓
4. Component adds token to URL and redirects → SDK auto-detects token from URL
   ↓
5. Provider automatically updates auth state → Components re-render
   ↓
6. User sees authenticated UI at destination
```

**Architecture:**

- **InsforgeProvider**: Manages authentication state globally using React Context
- **getInsforgeRoutes()**: Creates redirect routes for built-in auth
- **SDK Integration**: All auth operations go through `@insforge/sdk`, which auto-detects tokens from URL
- **React Context**: Provides auth state to all child components
- **Hooks**: Easy access to auth methods and user data

## Environment Variables (Optional if you directly inserted)

```bash .env
VITE_INSFORGE_BASE_URL=https://your-project.insforge.app/
```

---

## Complete Components (with Business Logic)

These components include full authentication logic and work out of the box.

### `<SignIn />`

Complete sign-in component with email/password and OAuth:

```tsx
import { SignIn } from '@insforge/react';

function SignInPage() {
  return (
    <SignIn
      title="Welcome Back"
      subtitle="Sign in to continue"
      onError={(error) => {
        console.error('Error:', error);
      }}
    />
  );
}
```

**Key Features:**

- Email/password authentication
- OAuth provider buttons (auto-detected from backend)
- Password visibility toggle
- Error handling
- Loading states
- Customizable text

**Props:**

- `onError` - Callback on error
- `title` / `subtitle` - Custom heading text

### `<SignUp />`

Complete sign-up component with password strength validation:

```tsx
import { SignUp } from '@insforge/react';

function SignUpPage() {
  return (
    <SignUp
      title="Create Account"
      subtitle="Get started with your free account"
      onError={(error) => {
        console.error('Error:', error);
      }}
    />
  );
}
```

**Key Features:**

- Email/password registration
- Real-time password strength indicator
- OAuth provider buttons
- Form validation
- Customizable text

**Props:** Same as `<SignIn>`.

### `<UserButton />`

User profile dropdown with sign-out:

```tsx
import { UserButton } from '@insforge/react';

function Header() {
  return (
    <header>
      <nav>{/* Your navigation */}</nav>
      <UserButton afterSignOutUrl="/" mode="detailed" />
    </header>
  );
}
```

**Modes:**

- `detailed` (default): Shows avatar + name + email
- `simple`: Shows avatar only

**Props:**

- `mode` - Display mode: `"detailed"` or `"simple"`
- `afterSignOutUrl` - Redirect URL after sign out

### `<ForgotPassword />`

Complete password reset flow with automatic method detection:

```tsx
import { ForgotPassword } from '@insforge/react';

function ForgotPasswordPage() {
  return (
    <ForgotPassword
      onError={(error) => {
        console.error('Error:', error);
      }}
    />
  );
}
```

**Key Features:**

- Auto-detects reset method (code or link) from backend config
- **Link method**: Sends email with reset link
- **Code method**: Three-step flow (email → verify code → reset password)
- 60-second countdown timer for resend
- Built-in form validation
- Customizable text

**Props:**

- `onError` - Callback on error

### `<Protect />`

Protected content with conditional rendering:

```tsx
import { Protect } from '@insforge/react';

function Dashboard() {
  return (
    <div>
      <h1>Dashboard</h1>

      {/* Simple protection */}
      <Protect redirectTo="/sign-in">
        <UserContent />
      </Protect>

      {/* Role-based protection */}
      <Protect redirectTo="/unauthorized" condition={(user) => user.role === 'admin'}>
        <AdminPanel />
      </Protect>

      {/* With fallback */}
      <Protect condition={(user) => user.emailVerified} fallback={<VerifyEmailPrompt />}>
        <VerifiedUserFeature />
      </Protect>
    </div>
  );
}
```

**Props:**

- `redirectTo` - URL to redirect if not authorized
- `condition` - Custom condition function `(user) => boolean`
- `fallback` - React node to show if not authorized

### `<SignedIn>` / `<SignedOut>`

Conditional rendering based on auth state:

```tsx
import { SignedIn, SignedOut } from '@insforge/react';

function NavBar() {
  return (
    <nav>
      <SignedOut>
        <a href="/sign-in">Sign In</a>
        <a href="/sign-up">Sign Up</a>
      </SignedOut>

      <SignedIn>
        <a href="/dashboard">Dashboard</a>
        <UserButton />
      </SignedIn>
    </nav>
  );
}
```

---

## Hooks

### `useAuth()`

Access authentication methods and state:

```tsx
import { useAuth } from '@insforge/react';

function LoginButton() {
  const { signIn, signUp, signOut, isSignedIn, isLoaded } = useAuth();

  const handleSignIn = async () => {
    try {
      await signIn('user@example.com', 'password');
    } catch (error) {
      console.error('Sign in failed:', error);
    }
  };

  if (!isLoaded) return <div>Loading...</div>;

  return (
    <button onClick={isSignedIn ? signOut : handleSignIn}>
      {isSignedIn ? 'Sign Out' : 'Sign In'}
    </button>
  );
}
```

**Returns:**

- `signIn(email, password)` - Sign in with email/password
- `signUp(email, password)` - Sign up new user
- `signOut()` - Sign out current user
- `isSignedIn` - Boolean auth state
- `isLoaded` - Boolean loading state

### `useUser()`

Access current user data:

```tsx
import { useUser } from '@insforge/react';

function UserProfile() {
  const { user, isLoaded, updateUser } = useUser();

  if (!isLoaded) return <div>Loading...</div>;
  if (!user) return <div>Not signed in</div>;

  const handleUpdate = async () => {
    await updateUser({ name: 'New Name' });
  };

  return (
    <div>
      <p>Email: {user.email}</p>
      <p>Name: {user.name}</p>
      <img src={user.avatarUrl} alt="Avatar" />
      <button onClick={handleUpdate}>Update Name</button>
    </div>
  );
}
```

**Returns:**

- `user` - User object with id, email, name, avatarUrl
- `isLoaded` - Boolean loading state
- `updateUser(data)` - Update user profile
- `setUser(user)` - Manually set user state

### `usePublicAuthConfig()`

Get Your authenication config in InsForge:

```tsx
import { usePublicAuthConfig } from '@insforge/react';

function SignInPage() {
  const { oauthProviders, emailConfig, isLoaded } = usePublicAuthConfig();

  if (!isLoaded) return <div>Loading...</div>;

  return (
    <div>
      <p>Available OAuth: {oauthProviders.join(', ')}</p>
      <p>Password min length: {emailConfig?.passwordMinLength}</p>
    </div>
  );
}
```

**Returns:**

- `oauthProviders` - Oauth providers enabled by you.
- `emailConfig` - Your email auth config like password length
- `isLoaded` - Boolean loading state

<Warning>
  **Performance**: Only use this hook in SignIn/SignUp components to avoid unnecessary API calls.
</Warning>

---

## Advanced Features

### Auth Change Callback

Track authentication state changes:

```tsx
<InsforgeProvider
  baseUrl={baseUrl}
  onAuthChange={(user) => {
    if (user) {
      console.log('User signed in:', user.email);
      analytics.identify(user.id);
    } else {
      console.log('User signed out');
      analytics.reset();
    }
  }}
>
  {children}
</InsforgeProvider>
```

---

## OAuth Providers

Built-in support for 10+ OAuth providers:

- Google
- GitHub
- Discord
- Apple
- Microsoft
- Facebook
- LinkedIn
- Instagram
- TikTok
- Spotify
- X (Twitter)

Providers are auto-detected from your backend configuration.

---

## Why @insforge/react?

<CardGroup cols={2}>
  <Card title="vs. Building Custom" icon="hammer">
    5 minutes vs 2+ days of development. Production-ready security built-in.
  </Card>

  <Card title="vs. Other Libraries" icon="scale-balanced">
    Complete package (not just UI). Framework agnostic. Self-hosted.
  </Card>

  <Card title="For Developers" icon="user">
    Customizable when needed, works out of the box. No framework lock-in.
  </Card>

  <Card title="For AI Agents" icon="robot">
    SDK-first approach ensures consistent API. Complete type safety reduces errors.
  </Card>
</CardGroup>

<Note>
  **Key Architecture**: This package is framework-agnostic. It works with any React setup and uses
  `@insforge/sdk` for all backend communication.
</Note>

---

## Resources

<CardGroup cols={3}>
  <Card title="Documentation" icon="book" href="https://docs.insforge.dev/introduction">
    Full documentation
  </Card>

  <Card title="GitHub Issues" icon="github" href="https://github.com/InsForge/InsForge/issues">
    Report bugs & request features
  </Card>

  <Card title="Discord Community" icon="discord" href="https://discord.com/invite/DvBtaEc9Jz">
    Get help & share feedback
  </Card>
</CardGroup>
