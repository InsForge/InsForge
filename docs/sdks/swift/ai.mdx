---
title: AI SDK Reference
description: AI chat completions and image generation with the InsForge Swift SDK
---

<Info>
  **Coming Soon** - The Swift SDK is currently in development. This documentation serves as a preview of the planned API.
</Info>

## Installation

```swift
import InsForge

let insforge = InsForgeClient(
    baseUrl: "https://your-app.us-east.insforge.app",
    anonKey: "your-anon-key"
)
```

## chat.completions.create()

Create AI chat completions.

### Parameters

- `model` (String) - AI model (e.g., "anthropic/claude-3.5-haiku", "openai/gpt-4")
- `messages` ([ChatMessage]) - Array of chat messages
- `temperature` (Double, optional) - Sampling temperature 0-2
- `maxTokens` (Int, optional) - Max tokens to generate
- `stream` (Bool, optional) - Enable streaming mode

### Example (non-streaming)

```swift
let completion = try await insforge.ai.chat.completions.create(
    model: "anthropic/claude-3.5-haiku",
    messages: [
        ChatMessage(role: .user, content: "What is the capital of France?")
    ]
)

print(completion.choices[0].message.content)
```

### Example (with image)

```swift
let imageData = selectedImage.jpegData(compressionQuality: 0.8)!
let base64Image = imageData.base64EncodedString()

let completion = try await insforge.ai.chat.completions.create(
    model: "anthropic/claude-3.5-haiku",
    messages: [
        ChatMessage(
            role: .user,
            content: [
                .text("What do you see in this image?"),
                .imageUrl("data:image/jpeg;base64,\(base64Image)")
            ]
        )
    ]
)

print(completion.choices[0].message.content)
```

### Example (streaming)

```swift
let stream = try await insforge.ai.chat.completions.createStream(
    model: "openai/gpt-4",
    messages: [
        ChatMessage(role: .user, content: "Tell me a story")
    ]
)

for try await chunk in stream {
    if let content = chunk.choices[0].delta.content {
        print(content, terminator: "")
    }
}
```

---

## images.generate()

Generate images using AI models.

### Parameters

- `model` (String) - Image model
- `prompt` (String) - Text description of image
- `size` (String, optional) - Image size ("1024x1024", "512x512")
- `numImages` (Int, optional) - Number of images to generate

### Example

```swift
let response = try await insforge.ai.images.generate(
    model: "google/gemini-2.5-flash-image-preview",
    prompt: "A serene mountain landscape at sunset",
    size: "1024x1024"
)

// Convert base64 to UIImage
if let base64 = response.data[0].b64Json,
   let imageData = Data(base64Encoded: base64),
   let image = UIImage(data: imageData) {
    imageView.image = image

    // Upload to storage
    let uploadResult = try await insforge.storage
        .from("ai-images")
        .uploadAuto(data: imageData, contentType: "image/png")

    // Save to database
    try await insforge.database
        .from("generated_images")
        .insert([
            "prompt": "A serene mountain landscape",
            "image_url": uploadResult.url
        ])
}
```

---

## SwiftUI Integration

### Chat View

```swift
import SwiftUI

struct ChatView: View {
    @State private var messages: [ChatMessage] = []
    @State private var inputText = ""
    @State private var isLoading = false

    var body: some View {
        VStack {
            ScrollView {
                LazyVStack(alignment: .leading, spacing: 12) {
                    ForEach(messages, id: \.id) { message in
                        ChatBubble(message: message)
                    }
                }
                .padding()
            }

            HStack {
                TextField("Message", text: $inputText)
                    .textFieldStyle(.roundedBorder)

                Button(action: sendMessage) {
                    Image(systemName: "paperplane.fill")
                }
                .disabled(inputText.isEmpty || isLoading)
            }
            .padding()
        }
    }

    func sendMessage() {
        let userMessage = ChatMessage(role: .user, content: inputText)
        messages.append(userMessage)
        inputText = ""
        isLoading = true

        Task {
            do {
                let completion = try await insforge.ai.chat.completions.create(
                    model: "anthropic/claude-3.5-haiku",
                    messages: messages
                )

                let assistantMessage = completion.choices[0].message
                messages.append(assistantMessage)
            } catch {
                print("Error: \(error)")
            }
            isLoading = false
        }
    }
}
```

### Streaming Chat

```swift
struct StreamingChatView: View {
    @State private var response = ""
    @State private var isStreaming = false

    var body: some View {
        VStack {
            ScrollView {
                Text(response)
                    .padding()
            }

            Button("Ask AI") {
                Task {
                    await streamResponse()
                }
            }
            .disabled(isStreaming)
        }
    }

    func streamResponse() async {
        isStreaming = true
        response = ""

        do {
            let stream = try await insforge.ai.chat.completions.createStream(
                model: "anthropic/claude-3.5-haiku",
                messages: [
                    ChatMessage(role: .user, content: "Explain quantum computing")
                ]
            )

            for try await chunk in stream {
                if let content = chunk.choices[0].delta.content {
                    await MainActor.run {
                        response += content
                    }
                }
            }
        } catch {
            print("Stream error: \(error)")
        }

        isStreaming = false
    }
}
```

### Image Generation View

```swift
struct ImageGenerationView: View {
    @State private var prompt = ""
    @State private var generatedImage: UIImage?
    @State private var isGenerating = false

    var body: some View {
        VStack(spacing: 20) {
            TextField("Describe your image...", text: $prompt)
                .textFieldStyle(.roundedBorder)

            Button("Generate Image") {
                Task {
                    await generateImage()
                }
            }
            .disabled(prompt.isEmpty || isGenerating)

            if isGenerating {
                ProgressView("Generating...")
            }

            if let image = generatedImage {
                Image(uiImage: image)
                    .resizable()
                    .scaledToFit()
                    .frame(maxHeight: 300)
            }
        }
        .padding()
    }

    func generateImage() async {
        isGenerating = true

        do {
            let response = try await insforge.ai.images.generate(
                model: "google/gemini-2.5-flash-image-preview",
                prompt: prompt,
                size: "1024x1024"
            )

            if let base64 = response.data[0].b64Json,
               let data = Data(base64Encoded: base64),
               let image = UIImage(data: data) {
                await MainActor.run {
                    generatedImage = image
                }
            }
        } catch {
            print("Generation failed: \(error)")
        }

        isGenerating = false
    }
}
```
